/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.flagsmith=t(require("react")):e.flagsmith=t(e.react)}(global,(function(e){return(()=>{"use strict";var t={418:e=>{var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var i,s,u=o(e),f=1;f<arguments.length;f++){for(var c in i=Object(arguments[f]))r.call(i,c)&&(u[c]=i[c]);if(t){s=t(i);for(var l=0;l<s.length;l++)n.call(i,s[l])&&(u[s[l]]=i[s[l]])}}return u}},321:(e,t,r)=>{if(r(418),r(156),t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;t.Fragment=n("react.fragment")}t.jsxDEV=void 0},862:(e,t,r)=>{e.exports=r(321)},798:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this;Object.defineProperty(t,"__esModule",{value:!0}),t.FlagsmithProvider=t.FlagsmithContext=void 0;var a=r(862),i=r(156);t.FlagsmithContext=(0,i.createContext)(null);var s=r(73);t.FlagsmithProvider=function(e){var r=e.flagsmith,u=e.options,f=e.serverState,c=e.children;return f&&!r.api&&r.setState(f),(0,i.useEffect)((function(){r.init(n(n({},u),{onChange:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.onChange&&u.onChange.apply(u,e),s.default.trigger("event")}}))}),[]),(0,a.jsxDEV)(t.FlagsmithContext.Provider,n({value:r},{children:c}),void 0,!1,{fileName:"/Users/kylejohnson/flagsmith-js-client/react/FlagsmithProvider.tsx",lineNumber:37,columnNumber:11},o)},t.default=t.FlagsmithProvider},545:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(644),t),o(r(408),t),o(r(798),t)},644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFlags=void 0;var n=r(156),o=r(798),a=r(73),i=function(e,t){return t.map((function(t){return"".concat(e.getValue(t)).concat(e.hasFeature(t))})).join(",")};t.useFlags=function(e){var t,r,s=(t=function(e){if("string"==typeof e)return[e];if("object"==typeof e&&e.hasOwnProperty("length"))return e;throw new Error("Flagsmith: please supply an array of strings or a single string of flag keys to useFlags")}(e),(r=(0,n.useRef)(t)).current||(r.current=t),r.current),u=(0,n.useContext)(o.FlagsmithContext),f=(0,n.useState)(i(u,s)),c=f[0],l=f[1],h=(0,n.useRef)(c),p=(0,n.useCallback)((function(){var e=i(u,s);e!==h.current&&(h.current=e,l(e))}),[]);return(0,n.useEffect)((function(){return a.default.on("event",p),function(){a.default.off("event",p)}}),[]),(0,n.useMemo)((function(){var e={};return s.map((function(t){e[t]={enabled:u.hasFeature(t),value:u.getValue(t)}})),e}),[c])}},408:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFlagsmith=void 0;var n=r(156),o=r(798);t.useFlagsmith=function(){var e=(0,n.useContext)(o.FlagsmithContext);if(!e)throw new Error("useFlagsmith must be used with in a FlagsmithProvider");return e}},73:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=new function e(){for(var t={},r=this,n=0;n<arguments.length;n++){var o=arguments[n];switch(typeof o){case"string":t[o]=[];break;case"object":r=o;break;default:throw new TypeError("Eventjs() only accepts string and object parameters")}}if(r===this&&!(this instanceof e))throw new ReferenceError('Eventjs is not called with "new" keyword and no parameter of type object is passed to it');function a(e){if("string"!=typeof e||!t[e])throw new ReferenceError("The event name does not exist in this event manager: "+e);return!0}return r.on=function(e){a(e);for(var r=1;r<arguments.length;r++){var n=arguments[r];-1===t[e].indexOf(n)&&t[e].push(n)}return this},r.off=function(e){switch(arguments.length){case 0:for(var n in t)t.hasOwnProperty(n)&&r.off(n);break;case 1:a(e),t[e].length=0;break;default:a(e);for(var o=1;o<arguments.length;o++){var i=arguments[o],s=t[e].indexOf(i);-1!==s&&t[e].splice(s,1)}}return this},r.trigger=function(e){a(e);for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var i=t[e],s=[],u=0;u<i.length;u++){var f=i[u];try{f.apply(r,n)}catch(e){s.push({listener:f,error:e})}}if(s.length>0)throw s;return this},r}("event")},156:t=>{t.exports=e}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(545)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxFQUFXeEUsTUNKM0VrRSxFQUFvQlQsRUFBSSxDQUFDbUIsRUFBS0MsSUFBVTlHLE9BQU9FLFVBQVVELGVBQWVpQyxLQUFLMkUsRUFBS0MsR0NDbEZYLEVBQW9CZixFQUFLNUYsSUFDSCxvQkFBWDRDLFFBQTBCQSxPQUFPMkUsYUFDMUMvRyxPQUFPMEcsZUFBZWxILEVBQVM0QyxPQUFPMkUsWUFBYSxDQUFFeEQsTUFBTyxXQUU3RHZELE9BQU8wRyxlQUFlbEgsRUFBUyxhQUFjLENBQUUrRCxPQUFPLEtDRjdCNEMsRUFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL25vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL25vZGVfbW9kdWxlcy9yZWFjdC9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLnByb2R1Y3Rpb24ubWluLmpzIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL25vZGVfbW9kdWxlcy9yZWFjdC9qc3gtZGV2LXJ1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vcmVhY3QvRmxhZ3NtaXRoUHJvdmlkZXIudHN4Iiwid2VicGFjazovL2ZsYWdzbWl0aC8uL3JlYWN0L2luZGV4LnRzIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL3JlYWN0L3VzZUZsYWdzLnRzIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL3JlYWN0L3VzZUZsYWdzbWl0aC50cyIsIndlYnBhY2s6Ly9mbGFnc21pdGgvLi9yZWFjdC91dGlsL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9mbGFnc21pdGgvZXh0ZXJuYWwgdW1kIFwicmVhY3RcIiIsIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInJlYWN0XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImZsYWdzbWl0aFwiXSA9IGZhY3RvcnkocmVxdWlyZShcInJlYWN0XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJmbGFnc21pdGhcIl0gPSBmYWN0b3J5KHJvb3RbXCJyZWFjdFwiXSk7XG59KShnbG9iYWwsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzE1Nl9fKSB7XG5yZXR1cm4gIiwiLypcbm9iamVjdC1hc3NpZ25cbihjKSBTaW5kcmUgU29yaHVzXG5AbGljZW5zZSBNSVRcbiovXG5cbid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG52YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scztcbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgcHJvcElzRW51bWVyYWJsZSA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRpZiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQnKTtcblx0fVxuXG5cdHJldHVybiBPYmplY3QodmFsKTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkVXNlTmF0aXZlKCkge1xuXHR0cnkge1xuXHRcdGlmICghT2JqZWN0LmFzc2lnbikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIERldGVjdCBidWdneSBwcm9wZXJ0eSBlbnVtZXJhdGlvbiBvcmRlciBpbiBvbGRlciBWOCB2ZXJzaW9ucy5cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTQxMThcblx0XHR2YXIgdGVzdDEgPSBuZXcgU3RyaW5nKCdhYmMnKTsgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3LXdyYXBwZXJzXG5cdFx0dGVzdDFbNV0gPSAnZGUnO1xuXHRcdGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0ZXN0MSlbMF0gPT09ICc1Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDIgPSB7fTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcblx0XHRcdHRlc3QyWydfJyArIFN0cmluZy5mcm9tQ2hhckNvZGUoaSldID0gaTtcblx0XHR9XG5cdFx0dmFyIG9yZGVyMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QyKS5tYXAoZnVuY3Rpb24gKG4pIHtcblx0XHRcdHJldHVybiB0ZXN0MltuXTtcblx0XHR9KTtcblx0XHRpZiAob3JkZXIyLmpvaW4oJycpICE9PSAnMDEyMzQ1Njc4OScpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0zMDU2XG5cdFx0dmFyIHRlc3QzID0ge307XG5cdFx0J2FiY2RlZmdoaWprbG1ub3BxcnN0Jy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbiAobGV0dGVyKSB7XG5cdFx0XHR0ZXN0M1tsZXR0ZXJdID0gbGV0dGVyO1xuXHRcdH0pO1xuXHRcdGlmIChPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCB0ZXN0MykpLmpvaW4oJycpICE9PVxuXHRcdFx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIFdlIGRvbid0IGV4cGVjdCBhbnkgb2YgdGhlIGFib3ZlIHRvIHRocm93LCBidXQgYmV0dGVyIHRvIGJlIHNhZmUuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hvdWxkVXNlTmF0aXZlKCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG5cdHZhciBmcm9tO1xuXHR2YXIgdG8gPSB0b09iamVjdCh0YXJnZXQpO1xuXHR2YXIgc3ltYm9scztcblxuXHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdHRvW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuXHRcdFx0c3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAocHJvcElzRW51bWVyYWJsZS5jYWxsKGZyb20sIHN5bWJvbHNbaV0pKSB7XG5cdFx0XHRcdFx0dG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRvO1xufTtcbiIsIi8qKiBAbGljZW5zZSBSZWFjdCB2MTcuMC4yXG4gKiByZWFjdC1qc3gtZGV2LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanNcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO3JlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpO3JlcXVpcmUoXCJyZWFjdFwiKTtleHBvcnRzLkZyYWdtZW50PTYwMTA3O2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5mb3Ipe3ZhciBhPVN5bWJvbC5mb3I7ZXhwb3J0cy5GcmFnbWVudD1hKFwicmVhY3QuZnJhZ21lbnRcIil9ZXhwb3J0cy5qc3hERVY9dm9pZCAwO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5wcm9kdWN0aW9uLm1pbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUuZGV2ZWxvcG1lbnQuanMnKTtcbn1cbiIsIi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQsIEZDLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBJRmxhZ3NtaXRoLCBJU3RhdGUgfSBmcm9tICcuLi90eXBlcydcblxuZXhwb3J0IGNvbnN0IEZsYWdzbWl0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0PElGbGFnc21pdGggfCBudWxsPihudWxsKVxuaW1wb3J0IGV2ZW50cyBmcm9tICcuL3V0aWwvZXZlbnRzJ1xuZXhwb3J0IHR5cGUgRmxhZ3NtaXRoQ29udGV4dFR5cGUgPSB7XG4gIGZsYWdzbWl0aDogSUZsYWdzbWl0aFxuICBzZXJ2ZXJTdGF0ZT86IElTdGF0ZVxuICBvcHRpb25zOiBQYXJhbWV0ZXJzPElGbGFnc21pdGhbJ2luaXQnXT5bMF1cbn1cblxuZXhwb3J0IGNvbnN0IEZsYWdzbWl0aFByb3ZpZGVyOiBGQzxGbGFnc21pdGhDb250ZXh0VHlwZT4gPSAoe1xuICBmbGFnc21pdGgsXG4gIG9wdGlvbnMsXG4gIHNlcnZlclN0YXRlLFxuICBjaGlsZHJlbixcbn0pID0+IHtcbiAgLy8gQHRzLWlnbm9yZVxuICBpZiAoc2VydmVyU3RhdGUgJiYgIWZsYWdzbWl0aC5hcGkpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZmxhZ3NtaXRoLnNldFN0YXRlKHNlcnZlclN0YXRlKVxuICB9XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG5cbiAgICBmbGFnc21pdGguaW5pdCh7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgb25DaGFuZ2U6ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGlmIChvcHRpb25zLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgb3B0aW9ucy5vbkNoYW5nZSguLi5hcmdzKVxuICAgICAgICB9XG4gICAgICAgIGV2ZW50cy50cmlnZ2VyKCdldmVudCcpXG4gICAgICB9LFxuICAgIH0pXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIH0sIFtdKVxuICByZXR1cm4gKFxuICAgIDxGbGFnc21pdGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtmbGFnc21pdGh9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvRmxhZ3NtaXRoQ29udGV4dC5Qcm92aWRlcj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBGbGFnc21pdGhQcm92aWRlclxuIiwiZXhwb3J0ICogZnJvbSAnLi91c2VGbGFncydcbmV4cG9ydCAqIGZyb20gJy4vdXNlRmxhZ3NtaXRoJ1xuZXhwb3J0ICogZnJvbSAnLi9GbGFnc21pdGhQcm92aWRlcidcbiIsImltcG9ydCB7XG4gIHVzZUNhbGxiYWNrLFxuICB1c2VDb250ZXh0LFxuICB1c2VFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZixcbiAgdXNlU3RhdGUsXG4gIC8vIEB0cy1pZ25vcmVcbn0gZnJvbSAncmVhY3QnXG5pbXBvcnQge1xuICBGbGFnc21pdGhDb250ZXh0LFxufSBmcm9tICcuL0ZsYWdzbWl0aFByb3ZpZGVyJ1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgSUZsYWdzbWl0aCwgSUZsYWdzbWl0aEZlYXR1cmUgfSBmcm9tICcuLi90eXBlcydcbmltcG9ydCBldmVudHMgZnJvbSAnLi91dGlsL2V2ZW50cydcblxuY29uc3QgdXNlQ29uc3RhbnQgPSBmdW5jdGlvbiA8VD4odmFsdWU6IFQpOiBUIHtcbiAgY29uc3QgcmVmID0gdXNlUmVmKHZhbHVlKVxuICBpZiAoIXJlZi5jdXJyZW50KSB7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZVxuICB9XG4gIHJldHVybiByZWYuY3VycmVudFxufVxuXG5cblxuXG5jb25zdCBmbGFnc0FzQXJyYXkgPSAoX2ZsYWdzOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIGlmICh0eXBlb2YgX2ZsYWdzID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBbX2ZsYWdzXVxuICB9IGVsc2UgaWYgKHR5cGVvZiBfZmxhZ3MgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGluc1xuICAgIGlmIChfZmxhZ3MuaGFzT3duUHJvcGVydHkoJ2xlbmd0aCcpKSB7XG4gICAgICByZXR1cm4gX2ZsYWdzXG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnRmxhZ3NtaXRoOiBwbGVhc2Ugc3VwcGx5IGFuIGFycmF5IG9mIHN0cmluZ3Mgb3IgYSBzaW5nbGUgc3RyaW5nIG9mIGZsYWcga2V5cyB0byB1c2VGbGFncycsXG4gIClcbn1cbmNvbnN0IGdldFJlbmRlcktleSA9IChmbGFnc21pdGg6IElGbGFnc21pdGgsIGZsYWdzOiBzdHJpbmdbXSkgPT4ge1xuICByZXR1cm4gZmxhZ3NcbiAgICAubWFwKChrKSA9PiB7XG4gICAgICByZXR1cm4gYCR7ZmxhZ3NtaXRoLmdldFZhbHVlKGspfSR7ZmxhZ3NtaXRoLmhhc0ZlYXR1cmUoayl9YFxuICAgIH0pXG4gICAgLmpvaW4oJywnKVxufVxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZsYWdzPFAgZXh0ZW5kcyBzdHJpbmc+KF9mbGFnczogcmVhZG9ubHkgUFtdKTogeyBbSyBpbiBQXTogSUZsYWdzbWl0aEZlYXR1cmUgfSB7XG4gIGNvbnN0IGZsYWdzID0gdXNlQ29uc3RhbnQ8c3RyaW5nW10+KGZsYWdzQXNBcnJheShfZmxhZ3MpKVxuICBjb25zdCBmbGFnc21pdGggPSB1c2VDb250ZXh0KEZsYWdzbWl0aENvbnRleHQpXG4gIGNvbnN0IFtyZW5kZXJLZXksIHNldFJlbmRlcktleV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFxuICAgIGdldFJlbmRlcktleShmbGFnc21pdGgsIGZsYWdzKSxcbiAgKVxuICBjb25zdCByZW5kZXJSZWYgPSB1c2VSZWY8c3RyaW5nPihyZW5kZXJLZXkpXG4gIGNvbnN0IGV2ZW50TGlzdGVuZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgbmV3UmVuZGVyS2V5ID0gZ2V0UmVuZGVyS2V5KGZsYWdzbWl0aCwgZmxhZ3MpXG4gICAgaWYgKG5ld1JlbmRlcktleSAhPT0gcmVuZGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIHJlbmRlclJlZi5jdXJyZW50ID0gbmV3UmVuZGVyS2V5XG4gICAgICBzZXRSZW5kZXJLZXkobmV3UmVuZGVyS2V5KVxuICAgIH1cbiAgfSwgW10pXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZXZlbnRzLm9uKCdldmVudCcsIGV2ZW50TGlzdGVuZXIpXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGV2ZW50cy5vZmYoJ2V2ZW50JywgZXZlbnRMaXN0ZW5lcilcbiAgICB9XG4gIH0sIFtdKVxuICBjb25zdCByZXMgPSAgdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcmVzOiBhbnkgPSB7fVxuICAgIGZsYWdzLm1hcCgoaykgPT4ge1xuICAgICAgcmVzW2tdID0ge1xuICAgICAgICBlbmFibGVkOiBmbGFnc21pdGghLmhhc0ZlYXR1cmUoayksXG4gICAgICAgIHZhbHVlOiBmbGFnc21pdGghLmdldFZhbHVlKGspLFxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHJlc1xuICB9LCBbcmVuZGVyS2V5XSlcblxuICByZXR1cm4gcmVzXG59XG4iLCIvLyBAdHMtaWdub3JlXG5pbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBGbGFnc21pdGhDb250ZXh0IH0gZnJvbSAnLi9GbGFnc21pdGhQcm92aWRlcic7XG5pbXBvcnQgeyBJRmxhZ3NtaXRoIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmV4cG9ydCBjb25zdCB1c2VGbGFnc21pdGggPSAoKSA9PiB7XG4gIGNvbnN0IGNvbnRleHQgPSB1c2VDb250ZXh0PElGbGFnc21pdGg+KEZsYWdzbWl0aENvbnRleHQpXG5cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VGbGFnc21pdGggbXVzdCBiZSB1c2VkIHdpdGggaW4gYSBGbGFnc21pdGhQcm92aWRlcicpXG4gIH1cblxuICByZXR1cm4gY29udGV4dCBhcyBJRmxhZ3NtaXRoXG59XG4iLCJmdW5jdGlvbiBFdmVudGpzKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e307dmFyIHI9dGhpcztmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07c3dpdGNoKHR5cGVvZiBuKXtjYXNlXCJzdHJpbmdcIjplW25dPVtdO2JyZWFrO2Nhc2VcIm9iamVjdFwiOnI9bjticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJFdmVudGpzKCkgb25seSBhY2NlcHRzIHN0cmluZyBhbmQgb2JqZWN0IHBhcmFtZXRlcnNcIik7YnJlYWt9fWlmKHI9PT10aGlzJiYhKHRoaXMgaW5zdGFuY2VvZiBFdmVudGpzKSl7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdFdmVudGpzIGlzIG5vdCBjYWxsZWQgd2l0aCBcIm5ld1wiIGtleXdvcmQgYW5kIG5vIHBhcmFtZXRlciBvZiB0eXBlIG9iamVjdCBpcyBwYXNzZWQgdG8gaXQnKX1mdW5jdGlvbiBzKHIpe1widXNlIHN0cmljdFwiO2lmKHR5cGVvZiByIT09XCJzdHJpbmdcInx8IWVbcl0pe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcIlRoZSBldmVudCBuYW1lIGRvZXMgbm90IGV4aXN0IGluIHRoaXMgZXZlbnQgbWFuYWdlcjogXCIrcil9cmV0dXJuIHRydWV9ci5vbj1mdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtzKHIpO2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtpZihlW3JdLmluZGV4T2Yobik9PT0tMSl7ZVtyXS5wdXNoKG4pfX1yZXR1cm4gdGhpc307ci5vZmY9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpmb3IodmFyIG4gaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShuKSl7ci5vZmYobil9fWJyZWFrO2Nhc2UgMTpzKHQpO2VbdF0ubGVuZ3RoPTA7YnJlYWs7ZGVmYXVsdDpzKHQpO2Zvcih2YXIgYT0xO2E8YXJndW1lbnRzLmxlbmd0aDthKyspe3ZhciBpPWFyZ3VtZW50c1thXTt2YXIgbz1lW3RdLmluZGV4T2YoaSk7aWYobyE9PS0xKXtlW3RdLnNwbGljZShvLDEpfX1icmVha31yZXR1cm4gdGhpc307ci50cmlnZ2VyPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ModCk7dmFyIG49W107Zm9yKHZhciBhPTE7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl7bi5wdXNoKGFyZ3VtZW50c1thXSl9dmFyIGk9ZVt0XTt2YXIgbz1bXTtmb3IodmFyIGY9MDtmPGkubGVuZ3RoO2YrKyl7dmFyIHU9aVtmXTt0cnl7dS5hcHBseShyLG4pfWNhdGNoKGMpe28ucHVzaCh7bGlzdGVuZXI6dSxlcnJvcjpjfSl9fWlmKG8ubGVuZ3RoPjApe3Rocm93IG99cmV0dXJuIHRoaXN9O3JldHVybiByfVxuZXhwb3J0IGRlZmF1bHQgbmV3IEV2ZW50anMoICdldmVudCcgKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ1KTtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X18iLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3RvdHlwZSIsInByb3BJc0VudW1lcmFibGUiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvT2JqZWN0IiwidmFsIiwiVHlwZUVycm9yIiwiYXNzaWduIiwidGVzdDEiLCJTdHJpbmciLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwidGVzdDIiLCJpIiwiZnJvbUNoYXJDb2RlIiwibWFwIiwibiIsImpvaW4iLCJ0ZXN0MyIsInNwbGl0IiwiZm9yRWFjaCIsImxldHRlciIsImtleXMiLCJlcnIiLCJzaG91bGRVc2VOYXRpdmUiLCJ0YXJnZXQiLCJzb3VyY2UiLCJmcm9tIiwic3ltYm9scyIsInRvIiwicyIsImFyZ3VtZW50cyIsImxlbmd0aCIsImtleSIsImNhbGwiLCJGcmFnbWVudCIsIlN5bWJvbCIsImZvciIsImEiLCJqc3hERVYiLCJGbGFnc21pdGhDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsIkZsYWdzbWl0aFByb3ZpZGVyIiwiZmxhZ3NtaXRoIiwib3B0aW9ucyIsInNlcnZlclN0YXRlIiwiY2hpbGRyZW4iLCJhcGkiLCJzZXRTdGF0ZSIsInVzZUVmZmVjdCIsImluaXQiLCJvbkNoYW5nZSIsImFyZ3MiLCJ0cmlnZ2VyIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsImdldFJlbmRlcktleSIsImZsYWdzIiwiayIsImdldFZhbHVlIiwiaGFzRmVhdHVyZSIsIl9mbGFncyIsInJlZiIsIkVycm9yIiwiZmxhZ3NBc0FycmF5IiwidXNlUmVmIiwiY3VycmVudCIsInVzZUNvbnRleHQiLCJ1c2VTdGF0ZSIsInJlbmRlcktleSIsInNldFJlbmRlcktleSIsInJlbmRlclJlZiIsImV2ZW50TGlzdGVuZXIiLCJ1c2VDYWxsYmFjayIsIm5ld1JlbmRlcktleSIsIm9uIiwib2ZmIiwidXNlTWVtbyIsInJlcyIsImVuYWJsZWQiLCJ1c2VGbGFnc21pdGgiLCJjb250ZXh0IiwiRXZlbnRqcyIsImUiLCJyIiwidGhpcyIsInQiLCJSZWZlcmVuY2VFcnJvciIsImluZGV4T2YiLCJwdXNoIiwibyIsInNwbGljZSIsImYiLCJ1IiwiYXBwbHkiLCJjIiwibGlzdGVuZXIiLCJlcnJvciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=