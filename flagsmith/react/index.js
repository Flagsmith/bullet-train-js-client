/*! For license information please see index.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.flagsmith=t(require("react")):e.flagsmith=t(e.react)}(global,(function(e){return(()=>{"use strict";var t={418:e=>{var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var a,s,c=o(e),f=1;f<arguments.length;f++){for(var l in a=Object(arguments[f]))r.call(a,l)&&(c[l]=a[l]);if(t){s=t(a);for(var u=0;u<s.length;u++)n.call(a,s[u])&&(c[s[u]]=a[s[u]])}}return c}},321:(e,t,r)=>{if(r(418),r(156),t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;t.Fragment=n("react.fragment")}t.jsxDEV=void 0},862:(e,t,r)=>{e.exports=r(321)},798:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this;Object.defineProperty(t,"__esModule",{value:!0}),t.FlagsmithProvider=t.FlagsmithContext=void 0;var i=r(862),a=r(156);t.FlagsmithContext=(0,a.createContext)(null);var s=r(73);t.FlagsmithProvider=function(e){var r=e.flagsmith,c=e.options,f=e.serverState,l=e.children;return f&&!r.api&&r.setState(f),(0,a.useEffect)((function(){r.init(n(n({},c),{onChange:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.onChange&&c.onChange.apply(c,e),s.default.trigger("event")}}))}),[]),(0,i.jsxDEV)(t.FlagsmithContext.Provider,n({value:r},{children:l}),void 0,!1,{fileName:"/Users/kylejohnson/flagsmith-js-client/react/FlagsmithProvider.tsx",lineNumber:36,columnNumber:11},o)},t.default=t.FlagsmithProvider},545:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(644),t),o(r(408),t),o(r(798),t)},644:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(156),r(798),r(73)},408:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFlagsmith=void 0;var n=r(156),o=r(798);t.useFlagsmith=function(){var e=(0,n.useContext)(o.FlagsmithProvider);if(!e)throw new Error("useFlagsmith must be used with in a FlagsmithProvider");return e}},73:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=new function e(){for(var t={},r=this,n=0;n<arguments.length;n++){var o=arguments[n];switch(typeof o){case"string":t[o]=[];break;case"object":r=o;break;default:throw new TypeError("Eventjs() only accepts string and object parameters")}}if(r===this&&!(this instanceof e))throw new ReferenceError('Eventjs is not called with "new" keyword and no parameter of type object is passed to it');function i(e){if("string"!=typeof e||!t[e])throw new ReferenceError("The event name does not exist in this event manager: "+e);return!0}return r.on=function(e){i(e);for(var r=1;r<arguments.length;r++){var n=arguments[r];-1===t[e].indexOf(n)&&t[e].push(n)}return this},r.off=function(e){switch(arguments.length){case 0:for(var n in t)t.hasOwnProperty(n)&&r.off(n);break;case 1:i(e),t[e].length=0;break;default:i(e);for(var o=1;o<arguments.length;o++){var a=arguments[o],s=t[e].indexOf(a);-1!==s&&t[e].splice(s,1)}}return this},r.trigger=function(e){i(e);for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var a=t[e],s=[],c=0;c<a.length;c++){var f=a[c];try{f.apply(r,n)}catch(e){s.push({listener:f,error:e})}}if(s.length>0)throw s;return this},r}("event")},156:t=>{t.exports=e}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(545)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUM1RWpDLE9BQU9zRixlQUFlOUYsRUFBU3lDLEVBQUssQ0FBRXNELFlBQVksRUFBTUMsSUFBS0gsRUFBV3BELE1DSjNFOEMsRUFBb0JULEVBQUksQ0FBQ21CLEVBQUtDLElBQVUxRixPQUFPRSxVQUFVRCxlQUFlaUMsS0FBS3VELEVBQUtDLEdDQ2xGWCxFQUFvQmpCLEVBQUt0RSxJQUNILG9CQUFYNEMsUUFBMEJBLE9BQU91RCxhQUMxQzNGLE9BQU9zRixlQUFlOUYsRUFBUzRDLE9BQU91RCxZQUFhLENBQUVwQyxNQUFPLFdBRTdEdkQsT0FBT3NGLGVBQWU5RixFQUFTLGFBQWMsQ0FBRStELE9BQU8sS0NGN0J3QixFQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZsYWdzbWl0aC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vbm9kZV9tb2R1bGVzL29iamVjdC1hc3NpZ24vaW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vbm9kZV9tb2R1bGVzL3JlYWN0L2Nqcy9yZWFjdC1qc3gtZGV2LXJ1bnRpbWUucHJvZHVjdGlvbi5taW4uanMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vbm9kZV9tb2R1bGVzL3JlYWN0L2pzeC1kZXYtcnVudGltZS5qcyIsIndlYnBhY2s6Ly9mbGFnc21pdGgvLi9yZWFjdC9GbGFnc21pdGhQcm92aWRlci50c3giLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vcmVhY3QvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vcmVhY3QvdXNlRmxhZ3MudHMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vcmVhY3QvdXNlRmxhZ3NtaXRoLnRzIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL3JlYWN0L3V0aWwvZXZlbnRzLmpzIiwid2VicGFjazovL2ZsYWdzbWl0aC9leHRlcm5hbCB1bWQgXCJyZWFjdFwiIiwid2VicGFjazovL2ZsYWdzbWl0aC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2ZsYWdzbWl0aC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2ZsYWdzbWl0aC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2ZsYWdzbWl0aC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wicmVhY3RcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZmxhZ3NtaXRoXCJdID0gZmFjdG9yeShyZXF1aXJlKFwicmVhY3RcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImZsYWdzbWl0aFwiXSA9IGZhY3Rvcnkocm9vdFtcInJlYWN0XCJdKTtcbn0pKGdsb2JhbCwgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X18pIHtcbnJldHVybiAiLCIvKlxub2JqZWN0LWFzc2lnblxuKGMpIFNpbmRyZSBTb3JodXNcbkBsaWNlbnNlIE1JVFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFPYmplY3QuYXNzaWduKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxuXHRcdHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctd3JhcHBlcnNcblx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xuXHRcdH1cblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xuXHRcdH0pO1xuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XG5cdFx0fSk7XG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0dmFyIGZyb207XG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdHZhciBzeW1ib2xzO1xuXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XG5cdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdFx0XHRzeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwiLyoqIEBsaWNlbnNlIFJlYWN0IHYxNy4wLjJcbiAqIHJlYWN0LWpzeC1kZXYtcnVudGltZS5wcm9kdWN0aW9uLm1pbi5qc1xuICpcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG4ndXNlIHN0cmljdCc7cmVxdWlyZShcIm9iamVjdC1hc3NpZ25cIik7cmVxdWlyZShcInJlYWN0XCIpO2V4cG9ydHMuRnJhZ21lbnQ9NjAxMDc7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLmZvcil7dmFyIGE9U3ltYm9sLmZvcjtleHBvcnRzLkZyYWdtZW50PWEoXCJyZWFjdC5mcmFnbWVudFwiKX1leHBvcnRzLmpzeERFVj12b2lkIDA7XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLnByb2R1Y3Rpb24ubWluLmpzJyk7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcycpO1xufVxuIiwiLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgRkMsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IElGbGFnc21pdGgsIElTdGF0ZSB9IGZyb20gJy4uLydcblxuZXhwb3J0IGNvbnN0IEZsYWdzbWl0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0PElGbGFnc21pdGggfCBudWxsPihudWxsKVxuaW1wb3J0IGV2ZW50cyBmcm9tICcuL3V0aWwvZXZlbnRzJ1xuZXhwb3J0IHR5cGUgRmxhZ3NtaXRoQ29udGV4dFR5cGUgPSB7XG4gIGZsYWdzbWl0aDogSUZsYWdzbWl0aFxuICBzZXJ2ZXJTdGF0ZT86IElTdGF0ZVxuICBvcHRpb25zOiBQYXJhbWV0ZXJzPElGbGFnc21pdGhbJ2luaXQnXT5bMF1cbn1cblxuZXhwb3J0IGNvbnN0IEZsYWdzbWl0aFByb3ZpZGVyOiBGQzxGbGFnc21pdGhDb250ZXh0VHlwZT4gPSAoe1xuICBmbGFnc21pdGgsXG4gIG9wdGlvbnMsXG4gIHNlcnZlclN0YXRlLFxuICBjaGlsZHJlbixcbn0pID0+IHtcbiAgaWYgKHNlcnZlclN0YXRlICYmICFmbGFnc21pdGguYXBpKSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGZsYWdzbWl0aC5zZXRTdGF0ZShzZXJ2ZXJTdGF0ZSlcbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuXG4gICAgZmxhZ3NtaXRoLmluaXQoe1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG9uQ2hhbmdlOiAoLi4uYXJncykgPT4ge1xuICAgICAgICBpZiAob3B0aW9ucy5vbkNoYW5nZSkge1xuICAgICAgICAgIG9wdGlvbnMub25DaGFuZ2UoLi4uYXJncylcbiAgICAgICAgfVxuICAgICAgICBldmVudHMudHJpZ2dlcignZXZlbnQnKVxuICAgICAgfSxcbiAgICB9KVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICB9LCBbXSlcbiAgcmV0dXJuIChcbiAgICA8RmxhZ3NtaXRoQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17ZmxhZ3NtaXRofT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L0ZsYWdzbWl0aENvbnRleHQuUHJvdmlkZXI+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgRmxhZ3NtaXRoUHJvdmlkZXJcbiIsImV4cG9ydCAqIGZyb20gJy4vdXNlRmxhZ3MnXG5leHBvcnQgKiBmcm9tICcuL3VzZUZsYWdzbWl0aCdcbmV4cG9ydCAqIGZyb20gJy4vRmxhZ3NtaXRoUHJvdmlkZXInXG4iLCJpbXBvcnQge1xuICB1c2VDYWxsYmFjayxcbiAgdXNlQ29udGV4dCxcbiAgdXNlRWZmZWN0LFxuICB1c2VNZW1vLFxuICB1c2VSZWYsXG4gIHVzZVN0YXRlLFxuICAvLyBAdHMtaWdub3JlXG59IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHtcbiAgRmxhZ3NtaXRoQ29udGV4dCxcbn0gZnJvbSAnLi9GbGFnc21pdGhQcm92aWRlcidcbi8vIEB0cy1pZ25vcmVcbmltcG9ydCB7IElGbGFnc21pdGgsIElGbGFnc21pdGhGZWF0dXJlIH0gZnJvbSAnLi4vJ1xuaW1wb3J0IGV2ZW50cyBmcm9tICcuL3V0aWwvZXZlbnRzJ1xuXG5jb25zdCB1c2VDb25zdGFudCA9IGZ1bmN0aW9uIDxUPih2YWx1ZTogVCk6IFQge1xuICBjb25zdCByZWYgPSB1c2VSZWYodmFsdWUpXG4gIGlmICghcmVmLmN1cnJlbnQpIHtcbiAgICByZWYuY3VycmVudCA9IHZhbHVlXG4gIH1cbiAgcmV0dXJuIHJlZi5jdXJyZW50XG59XG5cblxuXG5cbmNvbnN0IGZsYWdzQXNBcnJheSA9IChfZmxhZ3M6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgaWYgKHR5cGVvZiBfZmxhZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIFtfZmxhZ3NdXG4gIH0gZWxzZSBpZiAodHlwZW9mIF9mbGFncyA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG4gICAgaWYgKF9mbGFncy5oYXNPd25Qcm9wZXJ0eSgnbGVuZ3RoJykpIHtcbiAgICAgIHJldHVybiBfZmxhZ3NcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICdGbGFnc21pdGg6IHBsZWFzZSBzdXBwbHkgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBhIHNpbmdsZSBzdHJpbmcgb2YgZmxhZyBrZXlzIHRvIHVzZUZsYWdzJyxcbiAgKVxufVxuY29uc3QgZ2V0UmVuZGVyS2V5ID0gKGZsYWdzbWl0aDogSUZsYWdzbWl0aCwgZmxhZ3M6IHN0cmluZ1tdKSA9PiB7XG4gIHJldHVybiBmbGFnc1xuICAgIC5tYXAoKGspID0+IHtcbiAgICAgIHJldHVybiBgJHtmbGFnc21pdGguZ2V0VmFsdWUoayl9JHtmbGFnc21pdGguaGFzRmVhdHVyZShrKX1gXG4gICAgfSlcbiAgICAuam9pbignLCcpXG59XG5mdW5jdGlvbiB1c2VGbGFnczxQIGV4dGVuZHMgc3RyaW5nPihfZmxhZ3M6IHJlYWRvbmx5IFBbXSk6IHsgW0sgaW4gUF06IElGbGFnc21pdGhGZWF0dXJlIH0ge1xuICBjb25zdCBmbGFncyA9IHVzZUNvbnN0YW50PHN0cmluZ1tdPihmbGFnc0FzQXJyYXkoX2ZsYWdzKSlcbiAgY29uc3QgZmxhZ3NtaXRoID0gdXNlQ29udGV4dChGbGFnc21pdGhDb250ZXh0KVxuICBjb25zdCBbcmVuZGVyS2V5LCBzZXRSZW5kZXJLZXldID0gdXNlU3RhdGU8c3RyaW5nPihcbiAgICBnZXRSZW5kZXJLZXkoZmxhZ3NtaXRoLCBmbGFncyksXG4gIClcbiAgY29uc3QgcmVuZGVyUmVmID0gdXNlUmVmPHN0cmluZz4ocmVuZGVyS2V5KVxuICBjb25zdCBldmVudExpc3RlbmVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG5ld1JlbmRlcktleSA9IGdldFJlbmRlcktleShmbGFnc21pdGgsIGZsYWdzKVxuICAgIGlmIChuZXdSZW5kZXJLZXkgIT09IHJlbmRlclJlZi5jdXJyZW50KSB7XG4gICAgICByZW5kZXJSZWYuY3VycmVudCA9IG5ld1JlbmRlcktleVxuICAgICAgc2V0UmVuZGVyS2V5KG5ld1JlbmRlcktleSlcbiAgICB9XG4gIH0sIFtdKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGV2ZW50cy5vbignZXZlbnQnLCBldmVudExpc3RlbmVyKVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBldmVudHMub2ZmKCdldmVudCcsIGV2ZW50TGlzdGVuZXIpXG4gICAgfVxuICB9LCBbXSlcbiAgY29uc3QgcmVzID0gIHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IHJlczogUmVjb3JkPHN0cmluZywgSUZsYWdzbWl0aEZlYXR1cmU+ID0ge31cbiAgICBmbGFncy5tYXAoKGspID0+IHtcbiAgICAgIHJlc1trXSA9IHtcbiAgICAgICAgZW5hYmxlZDogZmxhZ3NtaXRoIS5oYXNGZWF0dXJlKGspLFxuICAgICAgICB2YWx1ZTogZmxhZ3NtaXRoIS5nZXRWYWx1ZShrKSxcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiByZXNcbiAgfSwgW3JlbmRlcktleV0pXG5cbiAgcmV0dXJuIHJlc1xufVxuIiwiLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgRmxhZ3NtaXRoUHJvdmlkZXIgfSBmcm9tICcuL0ZsYWdzbWl0aFByb3ZpZGVyJ1xuaW1wb3J0IHsgSUZsYWdzbWl0aCB9IGZyb20gJy4uLydcblxuZXhwb3J0IGNvbnN0IHVzZUZsYWdzbWl0aCA9ICgpID0+IHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoRmxhZ3NtaXRoUHJvdmlkZXIpXG5cbiAgaWYgKCFjb250ZXh0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1c2VGbGFnc21pdGggbXVzdCBiZSB1c2VkIHdpdGggaW4gYSBGbGFnc21pdGhQcm92aWRlcicpXG4gIH1cblxuICByZXR1cm4gY29udGV4dCBhcyBJRmxhZ3NtaXRoXG59XG4iLCJmdW5jdGlvbiBFdmVudGpzKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGU9e307dmFyIHI9dGhpcztmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07c3dpdGNoKHR5cGVvZiBuKXtjYXNlXCJzdHJpbmdcIjplW25dPVtdO2JyZWFrO2Nhc2VcIm9iamVjdFwiOnI9bjticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJFdmVudGpzKCkgb25seSBhY2NlcHRzIHN0cmluZyBhbmQgb2JqZWN0IHBhcmFtZXRlcnNcIik7YnJlYWt9fWlmKHI9PT10aGlzJiYhKHRoaXMgaW5zdGFuY2VvZiBFdmVudGpzKSl7dGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCdFdmVudGpzIGlzIG5vdCBjYWxsZWQgd2l0aCBcIm5ld1wiIGtleXdvcmQgYW5kIG5vIHBhcmFtZXRlciBvZiB0eXBlIG9iamVjdCBpcyBwYXNzZWQgdG8gaXQnKX1mdW5jdGlvbiBzKHIpe1widXNlIHN0cmljdFwiO2lmKHR5cGVvZiByIT09XCJzdHJpbmdcInx8IWVbcl0pe3Rocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcIlRoZSBldmVudCBuYW1lIGRvZXMgbm90IGV4aXN0IGluIHRoaXMgZXZlbnQgbWFuYWdlcjogXCIrcil9cmV0dXJuIHRydWV9ci5vbj1mdW5jdGlvbihyKXtcInVzZSBzdHJpY3RcIjtzKHIpO2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtpZihlW3JdLmluZGV4T2Yobik9PT0tMSl7ZVtyXS5wdXNoKG4pfX1yZXR1cm4gdGhpc307ci5vZmY9ZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpmb3IodmFyIG4gaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShuKSl7ci5vZmYobil9fWJyZWFrO2Nhc2UgMTpzKHQpO2VbdF0ubGVuZ3RoPTA7YnJlYWs7ZGVmYXVsdDpzKHQpO2Zvcih2YXIgYT0xO2E8YXJndW1lbnRzLmxlbmd0aDthKyspe3ZhciBpPWFyZ3VtZW50c1thXTt2YXIgbz1lW3RdLmluZGV4T2YoaSk7aWYobyE9PS0xKXtlW3RdLnNwbGljZShvLDEpfX1icmVha31yZXR1cm4gdGhpc307ci50cmlnZ2VyPWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ModCk7dmFyIG49W107Zm9yKHZhciBhPTE7YTxhcmd1bWVudHMubGVuZ3RoO2ErKyl7bi5wdXNoKGFyZ3VtZW50c1thXSl9dmFyIGk9ZVt0XTt2YXIgbz1bXTtmb3IodmFyIGY9MDtmPGkubGVuZ3RoO2YrKyl7dmFyIHU9aVtmXTt0cnl7dS5hcHBseShyLG4pfWNhdGNoKGMpe28ucHVzaCh7bGlzdGVuZXI6dSxlcnJvcjpjfSl9fWlmKG8ubGVuZ3RoPjApe3Rocm93IG99cmV0dXJuIHRoaXN9O3JldHVybiByfVxuZXhwb3J0IGRlZmF1bHQgbmV3IEV2ZW50anMoICdldmVudCcgKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQ1KTtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMTU2X18iLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3RvdHlwZSIsInByb3BJc0VudW1lcmFibGUiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvT2JqZWN0IiwidmFsIiwiVHlwZUVycm9yIiwiYXNzaWduIiwidGVzdDEiLCJTdHJpbmciLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwidGVzdDIiLCJpIiwiZnJvbUNoYXJDb2RlIiwibWFwIiwibiIsImpvaW4iLCJ0ZXN0MyIsInNwbGl0IiwiZm9yRWFjaCIsImxldHRlciIsImtleXMiLCJlcnIiLCJzaG91bGRVc2VOYXRpdmUiLCJ0YXJnZXQiLCJzb3VyY2UiLCJmcm9tIiwic3ltYm9scyIsInRvIiwicyIsImFyZ3VtZW50cyIsImxlbmd0aCIsImtleSIsImNhbGwiLCJGcmFnbWVudCIsIlN5bWJvbCIsImZvciIsImEiLCJqc3hERVYiLCJGbGFnc21pdGhDb250ZXh0IiwiY3JlYXRlQ29udGV4dCIsIkZsYWdzbWl0aFByb3ZpZGVyIiwiZmxhZ3NtaXRoIiwib3B0aW9ucyIsInNlcnZlclN0YXRlIiwiY2hpbGRyZW4iLCJhcGkiLCJzZXRTdGF0ZSIsInVzZUVmZmVjdCIsImluaXQiLCJvbkNoYW5nZSIsImFyZ3MiLCJ0cmlnZ2VyIiwiUHJvdmlkZXIiLCJ2YWx1ZSIsInVzZUZsYWdzbWl0aCIsImNvbnRleHQiLCJ1c2VDb250ZXh0IiwiRXJyb3IiLCJFdmVudGpzIiwiZSIsInIiLCJ0aGlzIiwidCIsIlJlZmVyZW5jZUVycm9yIiwib24iLCJpbmRleE9mIiwicHVzaCIsIm9mZiIsIm8iLCJzcGxpY2UiLCJmIiwidSIsImFwcGx5IiwiYyIsImxpc3RlbmVyIiwiZXJyb3IiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwidG9TdHJpbmdUYWciXSwic291cmNlUm9vdCI6IiJ9