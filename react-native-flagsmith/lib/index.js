!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.flagsmith=e():t.flagsmith=e()}(global,(function(){return(()=>{"use strict";var t={63:t=>{t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,a,r;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(a=i;0!=a--;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(r=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,r[a]))return!1;for(a=i;0!=a--;){var s=r[a];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}},142:function(t,e,n){var i,a,r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},r.apply(this,arguments)},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,a=0,r=e.length;a<r;a++)!i&&a in e||(i||(i=Array.prototype.slice.call(e,0,a)),i[a]=e[a]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0});var l="BULLET_TRAIN_DB",o="BULLET_TRAIN_EVENT",u="https://api.flagsmith.com/api/v1/",g=n(63),c=function(t){return"Attempted to "+t+" a user before calling flagsmith.init. Call flagsmith.init first, if you wish to prevent it sending a request for flags, call init with preventFetch:true."},f=function(){function t(t){var e=this;this.getJSON=function(t,n,a){var r=e,s=r.environmentID,l=r.headers,o={method:n||"GET",body:a,headers:{"x-environment-key":s}};return n&&"GET"!==n&&(o.headers["Content-Type"]="application/json; charset=utf-8"),l&&Object.assign(o.headers,l),i(t,o).then((function(t){return t.text().then((function(e){var n=e;try{n=JSON.parse(e)}catch(t){}return t.ok?n:Promise.reject(n)}))}))},this.getFlags=function(t,n){var i=e,a=i.onChange,s=i.onError,l=i.identity,o=i.api,u=!1,c=function(t,n){var i=t.flags,s=t.traits;e.withTraits=!1;var l={},o={};if(s=s||[],(i=i||[]).forEach((function(t){l[t.feature.name.toLowerCase().replace(/ /g,"_")]={id:t.feature.id,enabled:t.enabled,value:t.feature_state_value}})),s.forEach((function(t){o[t.trait_key.toLowerCase().replace(/ /g,"_")]=t.trait_value})),e.oldFlags=r({},e.flags),n){var u={};n.map((function(t){u[t.name]=t})),e.segments=u}var c=g(e.flags,l),f=g(e.traits,o);e.flags=l,e.traits=o,e.updateStorage(),a&&a(e.oldFlags,{isFromServer:!0,flagsChanged:!c,traitsChanged:!f})};return l?Promise.all([e.withTraits?e.getJSON(o+"identities/","POST",JSON.stringify({identifier:l,traits:Object.keys(e.withTraits).map((function(t){return{trait_key:t,trait_value:e.withTraits[t]}}))})):e.getJSON(o+"identities/?identifier="+encodeURIComponent(l))]).then((function(e){c(e[0],e[1]),t&&!u&&(u=!0,t())})).catch((function(t){var e=t.message;s&&s({message:e})})):Promise.all([e.getJSON(o+"flags/")]).then((function(e){c({flags:e[0]},null),t&&!u&&(u=!0,t())})).catch((function(t){n&&!u&&(u=!0,n(t)),s&&s(t)}))},this.analyticsFlags=function(){var t=e.api;if(0!==Object.getOwnPropertyNames(e.evaluationEvent).length)return e.getJSON(t+"analytics/flags/","POST",JSON.stringify(e.evaluationEvent)).then((function(t){var n=e.getState();e.setState(r(r({},n),{evaluationEvent:{}})),e.updateEventStorage()})).catch((function(t){e.log("Exception fetching evaluationEvent",t)}))},this.analyticsInterval=null,this.api=null,this.cacheFlags=null,this.enableAnalytics=null,this.enableLogs=null,this.environmentID=null,this.evaluationEvent=null,this.flags=null,this.getFlagInterval=null,this.headers=null,this.initialised=null,this.oldFlags=null,this.onChange=null,this.onError=null,this.identity=null,this.segments=null,this.ticks=null,this.timer=null,this.traits=null,this.withTraits=null,this.evaluateFlag=function(t){if(e.enableAnalytics){if(!e.evaluationEvent)return;void 0===e.evaluationEvent[t]&&(e.evaluationEvent[t]=0),e.evaluationEvent[t]+=1}e.updateEventStorage()},this.getValue=function(t){var n=e.flags&&e.flags[t.toLowerCase().replace(/ /g,"_")],i=null;return n&&(i=n.value),e.evaluateFlag(t),i},this.getTrait=function(t){return e.traits&&e.traits[t.toLowerCase().replace(/ /g,"_")]},this.setTrait=function(t,n){var i=e,a=i.getJSON,r=i.identity,s=i.api;if(s){var l={identity:{identifier:r},trait_key:t,trait_value:n};return a("".concat(s,"traits/"),"POST",JSON.stringify(l)).then((function(){e.initialised&&e.getFlags()}))}console.error(c("setTrait"))},this.setTraits=function(t){var n=e,i=n.getJSON,a=n.identity,r=n.api;if(r){t&&"object"==typeof t||console.error("Expected object for flagsmith.setTraits");var s=Object.keys(t).map((function(e){return{identity:{identifier:a},trait_key:e,trait_value:t[e]}}));return i("".concat(r,"traits/bulk/"),"PUT",JSON.stringify(s)).then((function(){e.initialised&&e.getFlags()}))}console.error(c("setTraits"))},this.incrementTrait=function(t,n){var i=e,a=i.getJSON,r=i.identity,s=i.api;return a("".concat(s,"traits/increment-value/"),"POST",JSON.stringify({trait_key:t,increment_by:n,identifier:r})).then(e.getFlags)},this.hasFeature=function(t){var n=e.flags&&e.flags[t.toLowerCase().replace(/ /g,"_")],i=!1;return n&&n.enabled&&(i=!0),e.evaluateFlag(t),i},i=t.fetch?t.fetch:global.fetch,a=t.AsyncStorage}return t.prototype.init=function(t){var e=this,n=t.environmentID,i=t.api,s=void 0===i?u:i,g=t.headers,c=t.onChange,f=t.cacheFlags,h=t.onError,v=t.defaultFlags,p=t.preventFetch,y=t.enableLogs,d=t.enableAnalytics,m=t.AsyncStorage,S=t.state;return new Promise((function(t,i){if(e.environmentID=n,e.api=s,e.headers=g,e.getFlagInterval=null,e.analyticsInterval=null,e.onChange=c,e.onError=h,e.enableLogs=y,e.enableAnalytics=d||!1,e.flags=Object.assign({},v)||{},e.initialised=!0,e.ticks=1e4,e.timer=e.enableLogs?(new Date).valueOf():null,m&&(a=m),e.cacheFlags=void 0!==a&&f,e.setState(S),!n)throw i("Please specify a environment id"),"Please specify a environment id";a.getItem(o).then((function(t){if(t)try{e.evaluationEvent=JSON.parse(t)}catch(t){e.evaluationEvent={}}else e.evaluationEvent={};e.analyticsInterval=setInterval(e.analyticsFlags,e.ticks)})),e.enableAnalytics&&(e.analyticsInterval&&clearInterval(e.analyticsInterval),a.getItem(o,(function(t,n){if(n){var i=JSON.parse(n);i&&(S=e.getState(),e.log("Retrieved events from cache",n),e.setState(r(r({},S),{evaluationEvent:i})))}}))),f?a.getItem(l,(function(n,a){if(a)try{var r=JSON.parse(a);r&&r.api===e.api&&r.environmentID===e.environmentID&&(e.setState(r),e.log("Retrieved flags from cache",r)),e.flags?(e.onChange&&e.onChange(null,{isFromServer:!1}),e.oldFlags=e.flags,t(!0),p||e.getFlags()):p?t(!0):e.getFlags(t,i)}catch(t){e.log("Exception fetching cached logs",t)}else p?(v&&e.onChange(null,{isFromServer:!1}),t(!0)):e.getFlags(t,i)})):p?(v&&e.onChange(null,{isFromServer:!1}),t(!0)):e.getFlags(t,i)})).catch((function(t){return h&&h(t)}))},t.prototype.getAllFlags=function(){return this.flags},t.prototype.identify=function(t,e){return this.identity=t,e&&(this.withTraits=e),this.initialised&&!this.getFlagInterval?this.getFlags():Promise.resolve()},t.prototype.getState=function(){return{api:this.api,environmentID:this.environmentID,flags:this.flags,identity:this.identity,segments:this.segments,traits:this.traits,evaluationEvent:this.evaluationEvent}},t.prototype.setState=function(t){t&&(this.initialised=!0,this.api=t.api||this.api||u,this.environmentID=t.environmentID||this.environmentID,this.flags=t.flags||this.flags,this.identity=t.identity||this.identity,this.segments=t.segments||this.segments,this.traits=t.traits||this.traits,this.evaluationEvent=t.evaluationEvent||this.evaluationEvent)},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enableLogs&&console.log.apply(this,s(["FLAGSMITH:",(new Date).valueOf()-this.timer,"ms"],t,!0))},t.prototype.updateStorage=function(){if(this.cacheFlags){var t=JSON.stringify(this.getState());this.log("Setting storage",t),a.setItem(l,t)}},t.prototype.updateEventStorage=function(){if(this.enableAnalytics){var t=JSON.stringify(this.getState().evaluationEvent);this.log("Setting event storage",t),a.setItem(o,t)}},t.prototype.logout=function(){return this.identity=null,this.segments=null,this.traits=null,this.initialised&&!this.getFlagInterval?this.getFlags():Promise.resolve()},t.prototype.startListening=function(t){void 0===t&&(t=1e3),this.getFlagInterval&&clearInterval(this.getFlagInterval),this.getFlagInterval=setInterval(this.getFlags,t)},t.prototype.stopListening=function(){clearInterval(this.getFlagInterval),this.getFlagInterval=null},t.prototype.getSegments=function(){},t}();t.exports=function(t){var e=t.fetch,n=t.AsyncStorage;return new f({fetch:e,AsyncStorage:n})}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}var i={};return(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0}),t.createFlagsmithInstance=void 0;var e=n(142);t.default=e({}),t.createFlagsmithInstance=function(){return e({})}})(),i})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixpQkFFdkI0QixLQUFLNUIsZ0JBQWtCd0IsWUFBWUksS0FBS2hGLFNBQVVzRCxJQUd0RCxZQUFBbUMsY0FBQSxXQUNJWixjQUFjRyxLQUFLNUIsaUJBQ25CNEIsS0FBSzVCLGdCQUFrQixNQUczQixZQUFBc0MsWUFBQSxhQWdISixFQXplZSxHQTZlZjdJLEVBQU9ELFFBQVUsU0FBVSxHLElBQUV5SCxFQUFLLFFBQUVoRyxFQUFZLGVBQzVDLE9BQU8sSUFBSU8sRUFBVSxDQUFFeUYsTUFBSyxFQUFFaEcsYUFBWSxPQzFmMUNzSCxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCcEMsSUFBakJxQyxFQUNILE9BQU9BLEVBQWFsSixRQUdyQixJQUFJQyxFQUFTOEksRUFBeUJFLEdBQVksQ0FHakRqSixRQUFTLElBT1YsT0FIQW1KLEVBQW9CRixHQUFVM0gsS0FBS3JCLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNnSixHQUdwRS9JLEVBQU9ELFEsK0dDcEJmLElBQU1vSixFQUFPLEVBQVEsS0FDckIsVUFBZUEsRUFBSyxJQUNQLEVBQUFDLHdCQUEwQixXQUNuQyxPQUFPRCxFQUFLLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbGFnc21pdGgvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL25vZGVfbW9kdWxlcy9mYXN0LWRlZXAtZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoLy4vZmxhZ3NtaXRoLWNvcmUudHMiLCJ3ZWJwYWNrOi8vZmxhZ3NtaXRoL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2ZsYWdzbWl0aC8uL2luZGV4LnJlYWN0LW5hdGl2ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJmbGFnc21pdGhcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiZmxhZ3NtaXRoXCJdID0gZmFjdG9yeSgpO1xufSkoZ2xvYmFsLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIndXNlIHN0cmljdCc7XG5cbi8vIGRvIG5vdCBlZGl0IC5qcyBmaWxlcyBkaXJlY3RseSAtIGVkaXQgc3JjL2luZGV4LmpzdFxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09ICdvYmplY3QnICYmIHR5cGVvZiBiID09ICdvYmplY3QnKSB7XG4gICAgaWYgKGEuY29uc3RydWN0b3IgIT09IGIuY29uc3RydWN0b3IpIHJldHVybiBmYWxzZTtcblxuICAgIHZhciBsZW5ndGgsIGksIGtleXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICBpZiAoIWVxdWFsKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cblxuXG4gICAgaWYgKGEuY29uc3RydWN0b3IgPT09IFJlZ0V4cCkgcmV0dXJuIGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmZsYWdzID09PSBiLmZsYWdzO1xuICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKTtcbiAgICBpZiAoYS50b1N0cmluZyAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykgcmV0dXJuIGEudG9TdHJpbmcoKSA9PT0gYi50b1N0cmluZygpO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggIT09IE9iamVjdC5rZXlzKGIpLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgIGlmICghZXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgcmV0dXJuIGEhPT1hICYmIGIhPT1iO1xufTtcbiIsImltcG9ydCB7SUZsYWdzbWl0aH0gZnJvbSBcIi4vcmVhY3QtbmF0aXZlLWZsYWdzbWl0aFwiO1xuXG5sZXQgX2ZldGNoOiB0eXBlb2YgZ2xvYmFsLmZldGNoO1xubGV0IEFzeW5jU3RvcmFnZTtcbmNvbnN0IEZMQUdTTUlUSF9LRVkgPSBcIkJVTExFVF9UUkFJTl9EQlwiO1xuY29uc3QgRkxBR1NNSVRIX0VWRU5UID0gXCJCVUxMRVRfVFJBSU5fRVZFTlRcIjtcbmNvbnN0IGRlZmF1bHRBUEkgPSAnaHR0cHM6Ly9hcGkuZmxhZ3NtaXRoLmNvbS9hcGkvdjEvJztcbmNvbnN0IGRlZXBFcXVhbCA9IHJlcXVpcmUoJ2Zhc3QtZGVlcC1lcXVhbCcpO1xuXG5jb25zdCBpbml0RXJyb3IgPSBmdW5jdGlvbiAoY2FsbGVyKSB7XG4gICAgcmV0dXJuIFwiQXR0ZW1wdGVkIHRvIFwiICsgY2FsbGVyICsgXCIgYSB1c2VyIGJlZm9yZSBjYWxsaW5nIGZsYWdzbWl0aC5pbml0LiBDYWxsIGZsYWdzbWl0aC5pbml0IGZpcnN0LCBpZiB5b3Ugd2lzaCB0byBwcmV2ZW50IGl0IHNlbmRpbmcgYSByZXF1ZXN0IGZvciBmbGFncywgY2FsbCBpbml0IHdpdGggcHJldmVudEZldGNoOnRydWUuXCJcbn1cblxuY29uc3QgRmxhZ3NtaXRoID0gY2xhc3Mge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgaWYgKHByb3BzLmZldGNoKSB7XG4gICAgICAgICAgICBfZmV0Y2ggPSBwcm9wcy5mZXRjaDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF9mZXRjaCA9IGdsb2JhbC5mZXRjaDtcbiAgICAgICAgfVxuICAgICAgICBBc3luY1N0b3JhZ2UgPSBwcm9wcy5Bc3luY1N0b3JhZ2U7XG4gICAgfVxuXG4gICAgZ2V0SlNPTiA9ICh1cmw6c3RyaW5nLCBtZXRob2Q/OlwiR0VUXCJ8XCJQT1NUXCJ8XCJQVVRcIiwgYm9keT86Qm9keUluaXQpID0+IHtcbiAgICAgICAgY29uc3QgeyBlbnZpcm9ubWVudElELCBoZWFkZXJzIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QgfHwgJ0dFVCcsXG4gICAgICAgICAgICBib2R5LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICd4LWVudmlyb25tZW50LWtleSc6IGVudmlyb25tZW50SURcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG1ldGhvZCAmJiBtZXRob2QgIT09IFwiR0VUXCIpXG4gICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnXG5cbiAgICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob3B0aW9ucy5oZWFkZXJzLCBoZWFkZXJzKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfZmV0Y2godXJsLCBvcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnRleHQoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVyciA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5vayA/IGVyciA6IFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgIH07XG5cbiAgICBnZXRGbGFncyA9IChyZXNvbHZlPzoodj86YW55KT0+YW55LCByZWplY3Q/Oih2PzphbnkpPT5hbnkpID0+IHtcbiAgICAgICAgY29uc3QgeyBvbkNoYW5nZSwgb25FcnJvciwgaWRlbnRpdHksIGFwaSB9ID0gdGhpcztcbiAgICAgICAgbGV0IHJlc29sdmVkID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gKHsgZmxhZ3M6IGZlYXR1cmVzLCB0cmFpdHMgfSwgc2VnbWVudHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2l0aFRyYWl0cyA9IGZhbHNlO1xuICAgICAgICAgICAgLy8gSGFuZGxlIHNlcnZlciByZXNwb25zZVxuICAgICAgICAgICAgbGV0IGZsYWdzID0ge307XG4gICAgICAgICAgICBsZXQgdXNlclRyYWl0cyA9IHt9O1xuICAgICAgICAgICAgZmVhdHVyZXMgPSBmZWF0dXJlcyB8fCBbXTtcbiAgICAgICAgICAgIHRyYWl0cyA9IHRyYWl0cyB8fCBbXTtcbiAgICAgICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgICAgICAgICAgZmxhZ3NbZmVhdHVyZS5mZWF0dXJlLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyldID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogZmVhdHVyZS5mZWF0dXJlLmlkLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmZWF0dXJlLmVuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmZWF0dXJlLmZlYXR1cmVfc3RhdGVfdmFsdWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cmFpdHMuZm9yRWFjaCh0cmFpdCA9PiB7XG4gICAgICAgICAgICAgICAgdXNlclRyYWl0c1t0cmFpdC50cmFpdF9rZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyldID0gdHJhaXQudHJhaXRfdmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vbGRGbGFncyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmZsYWdzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHNlZ21lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHVzZXJTZWdtZW50cyA9IHt9O1xuICAgICAgICAgICAgICAgIHNlZ21lbnRzLm1hcCgocykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyU2VnbWVudHNbcy5uYW1lXSA9IHM7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50cyA9IHVzZXJTZWdtZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGZsYWdzRXF1YWwgPSBkZWVwRXF1YWwodGhpcy5mbGFncywgZmxhZ3MpO1xuICAgICAgICAgICAgY29uc3QgdHJhaXRzRXF1YWwgPSBkZWVwRXF1YWwodGhpcy50cmFpdHMsIHVzZXJUcmFpdHMpO1xuICAgICAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgICAgICAgICAgdGhpcy50cmFpdHMgPSB1c2VyVHJhaXRzO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdG9yYWdlKCk7XG4gICAgICAgICAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZSh0aGlzLm9sZEZsYWdzLCB7XG4gICAgICAgICAgICAgICAgICAgIGlzRnJvbVNlcnZlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3NDaGFuZ2VkOiAhZmxhZ3NFcXVhbCxcbiAgICAgICAgICAgICAgICAgICAgdHJhaXRzQ2hhbmdlZDogIXRyYWl0c0VxdWFsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGlkZW50aXR5KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMud2l0aFRyYWl0cz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRKU09OKGFwaSArICdpZGVudGl0aWVzLycsIFwiUE9TVFwiLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkZW50aWZpZXJcIjogaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFpdHM6IE9iamVjdC5rZXlzKHRoaXMud2l0aFRyYWl0cykubWFwKChrKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYWl0X2tleVwiOmssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0cmFpdF92YWx1ZVwiOiB0aGlzLndpdGhUcmFpdHNba11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgICAgICB9KSk6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRKU09OKGFwaSArICdpZGVudGl0aWVzLz9pZGVudGlmaWVyPScgKyBlbmNvZGVVUklDb21wb25lbnQoaWRlbnRpdHkpKSxcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVJlc3BvbnNlKHJlc1swXSwgcmVzWzFdKVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzb2x2ZSAmJiAhcmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCh7IG1lc3NhZ2UgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yICYmIG9uRXJyb3IoeyBtZXNzYWdlIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SlNPTihhcGkgKyBcImZsYWdzL1wiKVxuICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlUmVzcG9uc2UoeyBmbGFnczogcmVzWzBdIH0sIG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNvbHZlICYmICFyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVqZWN0ICYmICFyZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25FcnJvciAmJiBvbkVycm9yKGVycilcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmFseXRpY3NGbGFncyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBhcGkgfSA9IHRoaXM7XG4gICAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLmV2YWx1YXRpb25FdmVudCkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRKU09OKGFwaSArICdhbmFseXRpY3MvZmxhZ3MvJywgJ1BPU1QnLCBKU09OLnN0cmluZ2lmeSh0aGlzLmV2YWx1YXRpb25FdmVudCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2YWx1YXRpb25FdmVudDoge30sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV2ZW50U3RvcmFnZSgpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coXCJFeGNlcHRpb24gZmV0Y2hpbmcgZXZhbHVhdGlvbkV2ZW50XCIsIGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5hbHl0aWNzSW50ZXJ2YWw9IG51bGxcbiAgICBhcGk9IG51bGxcbiAgICBjYWNoZUZsYWdzPSBudWxsXG4gICAgZW5hYmxlQW5hbHl0aWNzPSBudWxsXG4gICAgZW5hYmxlTG9ncz0gbnVsbFxuICAgIGVudmlyb25tZW50SUQ9IG51bGxcbiAgICBldmFsdWF0aW9uRXZlbnQ9IG51bGxcbiAgICBmbGFncz0gbnVsbFxuICAgIGdldEZsYWdJbnRlcnZhbD0gbnVsbFxuICAgIGhlYWRlcnM9IG51bGxcbiAgICBpbml0aWFsaXNlZD0gbnVsbFxuICAgIG9sZEZsYWdzPSBudWxsXG4gICAgb25DaGFuZ2U9IG51bGxcbiAgICBvbkVycm9yPSBudWxsXG4gICAgaWRlbnRpdHk9IG51bGxcbiAgICBzZWdtZW50cz0gbnVsbFxuICAgIHRpY2tzPSBudWxsXG4gICAgdGltZXI9IG51bGxcbiAgICB0cmFpdHM9IG51bGxcbiAgICB3aXRoVHJhaXRzPSBudWxsXG5cbiAgICBpbml0KHtcbiAgICAgICAgZW52aXJvbm1lbnRJRCxcbiAgICAgICAgYXBpID0gZGVmYXVsdEFQSSxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgb25DaGFuZ2UsXG4gICAgICAgIGNhY2hlRmxhZ3MsXG4gICAgICAgIG9uRXJyb3IsXG4gICAgICAgIGRlZmF1bHRGbGFncyxcbiAgICAgICAgcHJldmVudEZldGNoLFxuICAgICAgICBlbmFibGVMb2dzLFxuICAgICAgICBlbmFibGVBbmFseXRpY3MsXG4gICAgICAgIEFzeW5jU3RvcmFnZTogX0FzeW5jU3RvcmFnZSxcbiAgICAgICAgc3RhdGVcbiAgICB9KSB7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW52aXJvbm1lbnRJRCA9IGVudmlyb25tZW50SUQ7XG4gICAgICAgICAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgICAgICB0aGlzLmdldEZsYWdJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmFuYWx5dGljc0ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcbiAgICAgICAgICAgIHRoaXMub25FcnJvciA9IG9uRXJyb3I7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUxvZ3MgPSBlbmFibGVMb2dzO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVBbmFseXRpY3MgPSBlbmFibGVBbmFseXRpY3MgPyBlbmFibGVBbmFseXRpY3MgOiBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0RmxhZ3MpIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnRpY2tzID0gMTAwMDA7XG5cblxuICAgICAgICAgICAgdGhpcy50aW1lciA9IHRoaXMuZW5hYmxlTG9ncyA/IG5ldyBEYXRlKCkudmFsdWVPZigpIDogbnVsbDtcbiAgICAgICAgICAgIGlmIChfQXN5bmNTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgQXN5bmNTdG9yYWdlID0gX0FzeW5jU3RvcmFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2FjaGVGbGFncyA9IHR5cGVvZiBBc3luY1N0b3JhZ2UgIT09ICd1bmRlZmluZWQnICYmIGNhY2hlRmxhZ3M7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKVxuICAgICAgICAgICAgaWYgKCFlbnZpcm9ubWVudElEKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdQbGVhc2Ugc3BlY2lmeSBhIGVudmlyb25tZW50IGlkJylcbiAgICAgICAgICAgICAgICB0aHJvdyAoJ1BsZWFzZSBzcGVjaWZ5IGEgZW52aXJvbm1lbnQgaWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQXN5bmNTdG9yYWdlLmdldEl0ZW0oRkxBR1NNSVRIX0VWRU5UKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpPT57XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRpb25FdmVudCA9IEpTT04ucGFyc2UocmVzKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRpb25FdmVudCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmFsdWF0aW9uRXZlbnQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuYWx5dGljc0ludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5hbmFseXRpY3NGbGFncywgdGhpcy50aWNrcyk7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlQW5hbHl0aWNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5hbHl0aWNzSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmFuYWx5dGljc0ludGVydmFsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBBc3luY1N0b3JhZ2UuZ2V0SXRlbShGTEFHU01JVEhfRVZFTlQsIChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UocmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSB0aGlzLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coXCJSZXRyaWV2ZWQgZXZlbnRzIGZyb20gY2FjaGVcIiwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWx1YXRpb25FdmVudDoganNvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0lmIHRoZSB1c2VyIHNwZWNpZmllZCBkZWZhdWx0IGZsYWdzIGVtaXQgYSBjaGFuZ2VkIGV2ZW50IGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBpZiAoY2FjaGVGbGFncykge1xuICAgICAgICAgICAgICAgIEFzeW5jU3RvcmFnZS5nZXRJdGVtKEZMQUdTTUlUSF9LRVksIChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uICYmIGpzb24uYXBpID09PSB0aGlzLmFwaSAmJiBqc29uLmVudmlyb25tZW50SUQgPT09IHRoaXMuZW52aXJvbm1lbnRJRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKGpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZyhcIlJldHJpZXZlZCBmbGFncyBmcm9tIGNhY2hlXCIsIGpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZsYWdzKSB7IC8vIHJldHJpZXZlZCBmbGFncyBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UobnVsbCwgeyBpc0Zyb21TZXJ2ZXI6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2xkRmxhZ3MgPSB0aGlzLmZsYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRGZXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRGbGFncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2ZW50RmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmxhZ3MocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2coXCJFeGNlcHRpb24gZmV0Y2hpbmcgY2FjaGVkIGxvZ3NcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZlbnRGZXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmxhZ3MocmVzb2x2ZSwgcmVqZWN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdEZsYWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UobnVsbCwgeyBpc0Zyb21TZXJ2ZXI6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFwcmV2ZW50RmV0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZsYWdzKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0RmxhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZShudWxsLCB7IGlzRnJvbVNlcnZlcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBvbkVycm9yICYmIG9uRXJyb3IoZXJyb3IpKTtcbiAgICB9XG5cbiAgICBnZXRBbGxGbGFncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhZ3M7XG4gICAgfVxuXG4gICAgaWRlbnRpZnkodXNlcklkLCB0cmFpdHMpIHtcbiAgICAgICAgdGhpcy5pZGVudGl0eSA9IHVzZXJJZDtcbiAgICAgICAgaWYodHJhaXRzKSB7XG4gICAgICAgICAgICB0aGlzLndpdGhUcmFpdHMgPSB0cmFpdHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGlzZWQgJiYgIXRoaXMuZ2V0RmxhZ0ludGVydmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGbGFncygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBnZXRTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwaTogdGhpcy5hcGksXG4gICAgICAgICAgICBlbnZpcm9ubWVudElEOiB0aGlzLmVudmlyb25tZW50SUQsXG4gICAgICAgICAgICBmbGFnczogdGhpcy5mbGFncyxcbiAgICAgICAgICAgIGlkZW50aXR5OiB0aGlzLmlkZW50aXR5LFxuICAgICAgICAgICAgc2VnbWVudHM6IHRoaXMuc2VnbWVudHMsXG4gICAgICAgICAgICB0cmFpdHM6IHRoaXMudHJhaXRzLFxuICAgICAgICAgICAgZXZhbHVhdGlvbkV2ZW50OiB0aGlzLmV2YWx1YXRpb25FdmVudCxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFwaSA9IHN0YXRlLmFwaSB8fCB0aGlzLmFwaSB8fCBkZWZhdWx0QVBJO1xuICAgICAgICAgICAgdGhpcy5lbnZpcm9ubWVudElEID0gc3RhdGUuZW52aXJvbm1lbnRJRCB8fCB0aGlzLmVudmlyb25tZW50SUQ7XG4gICAgICAgICAgICB0aGlzLmZsYWdzID0gc3RhdGUuZmxhZ3MgfHwgdGhpcy5mbGFncztcbiAgICAgICAgICAgIHRoaXMuaWRlbnRpdHkgPSBzdGF0ZS5pZGVudGl0eSB8fCB0aGlzLmlkZW50aXR5O1xuICAgICAgICAgICAgdGhpcy5zZWdtZW50cyA9IHN0YXRlLnNlZ21lbnRzIHx8IHRoaXMuc2VnbWVudHM7XG4gICAgICAgICAgICB0aGlzLnRyYWl0cyA9IHN0YXRlLnRyYWl0cyB8fCB0aGlzLnRyYWl0cztcbiAgICAgICAgICAgIHRoaXMuZXZhbHVhdGlvbkV2ZW50ID0gc3RhdGUuZXZhbHVhdGlvbkV2ZW50IHx8IHRoaXMuZXZhbHVhdGlvbkV2ZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9nKC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlTG9ncykge1xuICAgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkodGhpcywgW1wiRkxBR1NNSVRIOlwiLCBuZXcgRGF0ZSgpLnZhbHVlT2YoKSAtIHRoaXMudGltZXIsIFwibXNcIiwgLi4uYXJnc10pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlU3RvcmFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVGbGFncykge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmdldFN0YXRlKCkpO1xuICAgICAgICAgICAgdGhpcy5sb2coXCJTZXR0aW5nIHN0b3JhZ2VcIiwgc3RhdGUpO1xuICAgICAgICAgICAgQXN5bmNTdG9yYWdlLnNldEl0ZW0oRkxBR1NNSVRIX0tFWSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlRXZlbnRTdG9yYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVBbmFseXRpY3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0U3RhdGUoKS5ldmFsdWF0aW9uRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5sb2coXCJTZXR0aW5nIGV2ZW50IHN0b3JhZ2VcIiwgZXZlbnRzKTtcbiAgICAgICAgICAgIEFzeW5jU3RvcmFnZS5zZXRJdGVtKEZMQUdTTUlUSF9FVkVOVCwgZXZlbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvZ291dCgpIHtcbiAgICAgICAgdGhpcy5pZGVudGl0eSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnRyYWl0cyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmluaXRpYWxpc2VkICYmICF0aGlzLmdldEZsYWdJbnRlcnZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmxhZ3MoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgc3RhcnRMaXN0ZW5pbmcodGlja3MgPSAxMDAwKSB7XG4gICAgICAgIGlmICh0aGlzLmdldEZsYWdJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdldEZsYWdJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZXRGbGFnSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmdldEZsYWdzLCB0aWNrcyk7XG4gICAgfVxuXG4gICAgc3RvcExpc3RlbmluZygpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdldEZsYWdJbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuZ2V0RmxhZ0ludGVydmFsID0gbnVsbDtcbiAgICB9XG5cbiAgICBnZXRTZWdtZW50cygpIHtcbiAgICAgICAgLy8gbm9vcCBmb3Igbm93XG4gICAgICAgIC8vIHJldHVybiB0aGlzLnNlZ21lbnRzO1xuICAgIH1cblxuICAgIGV2YWx1YXRlRmxhZyA9IChrZXkpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlQW5hbHl0aWNzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZXZhbHVhdGlvbkV2ZW50KSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5ldmFsdWF0aW9uRXZlbnRba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmFsdWF0aW9uRXZlbnRba2V5XSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV2YWx1YXRpb25FdmVudFtrZXldICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVFdmVudFN0b3JhZ2UoKTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZSA9IChrZXkpID0+IHtcbiAgICAgICAgY29uc3QgZmxhZyA9IHRoaXMuZmxhZ3MgJiYgdGhpcy5mbGFnc1trZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyldO1xuICAgICAgICBsZXQgcmVzID0gbnVsbDtcbiAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgIHJlcyA9IGZsYWcudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmFsdWF0ZUZsYWcoa2V5KTtcblxuICAgICAgICAvL3RvZG8gcmVjb3JkIGNoZWNrIGZvciB2YWx1ZVxuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG4gICAgZ2V0VHJhaXQgPSAoa2V5KSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWl0ID0gdGhpcy50cmFpdHMgJiYgdGhpcy50cmFpdHNba2V5LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpXTtcbiAgICAgICAgcmV0dXJuIHRyYWl0O1xuICAgIH1cblxuICAgIHNldFRyYWl0ID0gKGtleSwgdHJhaXRfdmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgeyBnZXRKU09OLCBpZGVudGl0eSwgYXBpIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICghYXBpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGluaXRFcnJvcihcInNldFRyYWl0XCIpKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgICAgXCJpZGVudGl0eVwiOiB7XG4gICAgICAgICAgICAgICAgXCJpZGVudGlmaWVyXCI6IGlkZW50aXR5XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ0cmFpdF9rZXlcIjoga2V5LFxuICAgICAgICAgICAgXCJ0cmFpdF92YWx1ZVwiOiB0cmFpdF92YWx1ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdldEpTT04oYCR7YXBpfXRyYWl0cy9gLCAnUE9TVCcsIEpTT04uc3RyaW5naWZ5KGJvZHkpKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRpYWxpc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmxhZ3MoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgfTtcblxuICAgIHNldFRyYWl0cyA9ICh0cmFpdHMpID0+IHtcbiAgICAgICAgY29uc3QgeyBnZXRKU09OLCBpZGVudGl0eSwgYXBpIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICghYXBpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGluaXRFcnJvcihcInNldFRyYWl0c1wiKSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0cmFpdHMgfHwgdHlwZW9mIHRyYWl0cyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFeHBlY3RlZCBvYmplY3QgZm9yIGZsYWdzbWl0aC5zZXRUcmFpdHNcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBib2R5ID0gT2JqZWN0LmtleXModHJhaXRzKS5tYXAoKGtleSkgPT4gKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiaWRlbnRpdHlcIjoge1xuICAgICAgICAgICAgICAgICAgICBcImlkZW50aWZpZXJcIjogaWRlbnRpdHlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwidHJhaXRfa2V5XCI6IGtleSxcbiAgICAgICAgICAgICAgICBcInRyYWl0X3ZhbHVlXCI6IHRyYWl0c1trZXldXG4gICAgICAgICAgICB9XG4gICAgICAgICkpXG5cbiAgICAgICAgcmV0dXJuIGdldEpTT04oYCR7YXBpfXRyYWl0cy9idWxrL2AsICdQVVQnLCBKU09OLnN0cmluZ2lmeShib2R5KSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsaXNlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEZsYWdzKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgIH07XG5cbiAgICBpbmNyZW1lbnRUcmFpdCA9ICh0cmFpdF9rZXksIGluY3JlbWVudF9ieSkgPT4ge1xuICAgICAgICBjb25zdCB7IGdldEpTT04sIGlkZW50aXR5LCBhcGkgfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBnZXRKU09OKGAke2FwaX10cmFpdHMvaW5jcmVtZW50LXZhbHVlL2AsICdQT1NUJywgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdHJhaXRfa2V5LFxuICAgICAgICAgICAgaW5jcmVtZW50X2J5LFxuICAgICAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpdHlcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAudGhlbih0aGlzLmdldEZsYWdzKVxuICAgIH07XG5cbiAgICBoYXNGZWF0dXJlID0gKGtleSkgPT4ge1xuICAgICAgICBjb25zdCBmbGFnID0gdGhpcy5mbGFncyAmJiB0aGlzLmZsYWdzW2tleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJ18nKV07XG4gICAgICAgIGxldCByZXMgPSBmYWxzZTtcbiAgICAgICAgaWYgKGZsYWcgJiYgZmxhZy5lbmFibGVkKSB7XG4gICAgICAgICAgICByZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZhbHVhdGVGbGFnKGtleSk7XG5cbiAgICAgICAgLy90b2RvIHJlY29yZCBjaGVjayBmb3IgZmVhdHVyZVxuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuXG59O1xuXG50eXBlIENvbmZpZz0ge2ZldGNoPzphbnksIEFzeW5jU3RvcmFnZT86YW55fTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoeyBmZXRjaCwgQXN5bmNTdG9yYWdlIH06Q29uZmlnKTpJRmxhZ3NtaXRoIHtcbiAgICByZXR1cm4gbmV3IEZsYWdzbWl0aCh7IGZldGNoLCBBc3luY1N0b3JhZ2UgfSkgYXMgSUZsYWdzbWl0aDtcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiXG5jb25zdCBjb3JlID0gcmVxdWlyZSgnLi9mbGFnc21pdGgtY29yZScpO1xuZXhwb3J0IGRlZmF1bHQgY29yZSh7fSk7XG5leHBvcnQgY29uc3QgY3JlYXRlRmxhZ3NtaXRoSW5zdGFuY2UgPSAoKT0+e1xuICAgIHJldHVybiBjb3JlKHt9KVxufVxuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImdsb2JhbCIsImVxdWFsIiwiYSIsImIiLCJjb25zdHJ1Y3RvciIsImxlbmd0aCIsImkiLCJrZXlzIiwiQXJyYXkiLCJpc0FycmF5IiwiUmVnRXhwIiwic291cmNlIiwiZmxhZ3MiLCJ2YWx1ZU9mIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJrZXkiLCJfZmV0Y2giLCJBc3luY1N0b3JhZ2UiLCJGTEFHU01JVEhfS0VZIiwiRkxBR1NNSVRIX0VWRU5UIiwiZGVmYXVsdEFQSSIsImRlZXBFcXVhbCIsImluaXRFcnJvciIsImNhbGxlciIsIkZsYWdzbWl0aCIsInByb3BzIiwiZ2V0SlNPTiIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJlbnZpcm9ubWVudElEIiwiaGVhZGVycyIsIm9wdGlvbnMiLCJhc3NpZ24iLCJ0aGVuIiwicmVzIiwidGV4dCIsImVyciIsIkpTT04iLCJwYXJzZSIsImUiLCJvayIsIlByb21pc2UiLCJyZWplY3QiLCJnZXRGbGFncyIsInJlc29sdmUiLCJvbkNoYW5nZSIsIm9uRXJyb3IiLCJpZGVudGl0eSIsImFwaSIsInJlc29sdmVkIiwiaGFuZGxlUmVzcG9uc2UiLCJzZWdtZW50cyIsImZlYXR1cmVzIiwidHJhaXRzIiwid2l0aFRyYWl0cyIsInVzZXJUcmFpdHMiLCJmb3JFYWNoIiwiZmVhdHVyZSIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJpZCIsImVuYWJsZWQiLCJ2YWx1ZSIsImZlYXR1cmVfc3RhdGVfdmFsdWUiLCJ0cmFpdCIsInRyYWl0X2tleSIsInRyYWl0X3ZhbHVlIiwib2xkRmxhZ3MiLCJtYXAiLCJzIiwiZmxhZ3NFcXVhbCIsInRyYWl0c0VxdWFsIiwidXBkYXRlU3RvcmFnZSIsImlzRnJvbVNlcnZlciIsImZsYWdzQ2hhbmdlZCIsInRyYWl0c0NoYW5nZWQiLCJhbGwiLCJzdHJpbmdpZnkiLCJrIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2F0Y2giLCJtZXNzYWdlIiwiYW5hbHl0aWNzRmxhZ3MiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZXZhbHVhdGlvbkV2ZW50Iiwic3RhdGUiLCJnZXRTdGF0ZSIsInNldFN0YXRlIiwidXBkYXRlRXZlbnRTdG9yYWdlIiwibG9nIiwiYW5hbHl0aWNzSW50ZXJ2YWwiLCJjYWNoZUZsYWdzIiwiZW5hYmxlQW5hbHl0aWNzIiwiZW5hYmxlTG9ncyIsImdldEZsYWdJbnRlcnZhbCIsImluaXRpYWxpc2VkIiwidGlja3MiLCJ0aW1lciIsImV2YWx1YXRlRmxhZyIsInVuZGVmaW5lZCIsImdldFZhbHVlIiwiZmxhZyIsImdldFRyYWl0Iiwic2V0VHJhaXQiLCJjb25zb2xlIiwiZXJyb3IiLCJzZXRUcmFpdHMiLCJpbmNyZW1lbnRUcmFpdCIsImluY3JlbWVudF9ieSIsImlkZW50aWZpZXIiLCJoYXNGZWF0dXJlIiwiZmV0Y2giLCJpbml0IiwiZGVmYXVsdEZsYWdzIiwicHJldmVudEZldGNoIiwiX0FzeW5jU3RvcmFnZSIsIkRhdGUiLCJnZXRJdGVtIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwianNvbiIsImdldEFsbEZsYWdzIiwidGhpcyIsImlkZW50aWZ5IiwidXNlcklkIiwiYXBwbHkiLCJhcmdzIiwic2V0SXRlbSIsImV2ZW50cyIsImxvZ291dCIsInN0YXJ0TGlzdGVuaW5nIiwic3RvcExpc3RlbmluZyIsImdldFNlZ21lbnRzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNvcmUiLCJjcmVhdGVGbGFnc21pdGhJbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiIn0=