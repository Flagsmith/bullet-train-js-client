!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-native-flagsmith/react"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o={exports:{}};function u(){}u.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,u=r.length;o<u;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},o.exports=u,o.exports.TinyEmitter=u;var a=new o.exports.TinyEmitter,f=t.createContext(null),s=function(e){var n=t.useRef(e);return n.current||(n.current=e),n.current},c=function(e){if("string"==typeof e)return[e];if("object"==typeof e&&e.hasOwnProperty("length"))return e;throw new Error("Flagsmith: please supply an array of strings or a single string of flag keys to useFlags")},l=function(e,t,n){return void 0===n&&(n=[]),t.map((function(t){return"".concat(e.getValue(t)).concat(e.hasFeature(t))})).concat(n.map((function(t){return"".concat(e.getTrait(t))}))).join(",")};e.FlagsmithContext=f,e.FlagsmithProvider=function(e){var n=e.flagsmith,o=e.options,u=e.serverState,s=e.children,c=t.useRef(!0);return u&&!n.initialised&&n.setState(u),c.current&&(c.current=!1,o?n.init(i(i({},o),{onChange:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.onChange&&o.onChange.apply(o,e),a.emit("event")}})):n.trigger=function(){return a.emit("event")}),r.default.createElement(f.Provider,{value:n},s)},e.useFlags=function(e,n){void 0===n&&(n=[]);var r=s(c(e)),i=s(c(n)),o=t.useContext(f),u=t.useState(l(o,r)),h=u[0],p=u[1],g=t.useRef(h),v=t.useCallback((function(){var e=l(o,r,i);e!==g.current&&(g.current=e,p(e))}),[]);return t.useEffect((function(){return a.on("event",v),function(){a.off("event",v)}}),[]),t.useMemo((function(){var e={};return r.map((function(t){e[t]={enabled:o.hasFeature(t),value:o.getValue(t)}})).concat(null==i?void 0:i.map((function(t){e[t]=o.getTrait(t)}))),e}),[h])},e.useFlagsmith=function(){var e=t.useContext(f);if(!e)throw new Error("useFlagsmith must be used with in a FlagsmithProvider");return e},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react.js.map
